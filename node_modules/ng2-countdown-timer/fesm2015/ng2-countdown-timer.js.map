{"version":3,"file":"ng2-countdown-timer.js.map","sources":["ng://ng2-countdown-timer/lib/countdown/countdown.component.ts","ng://ng2-countdown-timer/lib/countdown.module.ts"],"sourcesContent":["import { Component, Input, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'countdown',\r\n  template: `<div class=\"countdown\">\r\n  <div *ngFor=\"let time of display; let i = index\" class=\"measurements {{time}}\">\r\n    <p class=\"measurements-number\">\r\n      {{ (showZero && displayNumbers[i] < 10) ? '0' + displayNumbers[i].trim() : displayNumbers[i]}}\r\n    </p>\r\n    <span *ngIf=\"display[i+1]\" class=\"divider\"> {{divider}} </span>\r\n    <p class=\"measurements-text\">\r\n      {{time}}\r\n    </p>\r\n  </div>\r\n</div>\r\n<ng-content></ng-content>`,\r\n  styles: [`.countdown{display:flex;align-items:center;justify-content:center;align-content:center;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif}.countdown .measurements{flex:.1}.countdown .measurements .divider{float:right}`]\r\n})\r\nexport class CountdownComponent {\r\n\r\n  @Input() units: any;\r\n  @Input() end: any;\r\n  @Input() displayString: String = '';\r\n  @Input() text: any;\r\n  @Input() divider: any;\r\n  @Input() showZero: Boolean = false;\r\n  @Output() reached: EventEmitter<Date> = new EventEmitter();\r\n  display: any = [];\r\n  displayNumbers: any = [];\r\n  wasReached: Boolean = false;\r\n\r\n  constructor() {\r\n    setInterval(() => this._displayString(), 100);\r\n  }\r\n\r\n  _displayString() {\r\n    if (this.wasReached)\r\n      return;\r\n\r\n    if (typeof this.units === 'string') {\r\n      this.units = this.units.split('|');\r\n    }\r\n\r\n    let givenDate: any = new Date(this.end);\r\n    let now: any = new Date();\r\n    let dateDifference: any = givenDate - now;\r\n\r\n    if ((dateDifference < 100 && dateDifference > 0) || dateDifference < 0 && !this.wasReached) {\r\n      this.wasReached = true;\r\n      this.reached.next(now);\r\n    }\r\n\r\n    let lastUnit = this.units[this.units.length - 1],\r\n      unitConstantForMillisecs = {\r\n        year: (((1000 * 60 * 60 * 24 * 7) * 4) * 12),\r\n        month: ((1000 * 60 * 60 * 24 * 7) * 4),\r\n        weeks: (1000 * 60 * 60 * 24 * 7),\r\n        days: (1000 * 60 * 60 * 24),\r\n        hours: (1000 * 60 * 60),\r\n        minutes: (1000 * 60),\r\n        seconds: 1000\r\n      },\r\n      unitsLeft = {},\r\n      returnText = '',\r\n      returnNumbers = '',\r\n      totalMillisecsLeft = dateDifference,\r\n      i,\r\n      unit: any;\r\n\r\n    for (i in this.units) {\r\n      if (this.units.hasOwnProperty(i)) {\r\n\r\n        unit = this.units[i].trim();\r\n        if (unitConstantForMillisecs[unit.toLowerCase()] === false) {\r\n          //$interval.cancel(countDownInterval);\r\n          throw new Error('Cannot repeat unit: ' + unit);\r\n\r\n        }\r\n        if (unitConstantForMillisecs.hasOwnProperty(unit.toLowerCase()) === false) {\r\n          throw new Error('Unit: ' + unit + ' is not supported. Please use following units: year, month, weeks, days, hours, minutes, seconds, milliseconds');\r\n        }\r\n\r\n        // If it was reached, everything is zero\r\n        unitsLeft[unit] = (this.wasReached) ? 0 : totalMillisecsLeft / unitConstantForMillisecs[unit.toLowerCase()];\r\n\r\n        if (lastUnit === unit) {\r\n          unitsLeft[unit] = Math.ceil(unitsLeft[unit]);\r\n        } else {\r\n          unitsLeft[unit] = Math.floor(unitsLeft[unit]);\r\n        }\r\n\r\n        totalMillisecsLeft -= unitsLeft[unit] * unitConstantForMillisecs[unit.toLowerCase()];\r\n        unitConstantForMillisecs[unit.toLowerCase()] = false;\r\n\r\n        // If it's less than 0, round to 0\r\n        unitsLeft[unit] = (unitsLeft[unit] > 0) ? unitsLeft[unit] : 0;\r\n\r\n        returnNumbers += ' ' + unitsLeft[unit] + ' | ';\r\n        returnText += ' ' + unit;\r\n      }\r\n    }\r\n\r\n    if (this.text === null || !this.text) {\r\n      this.text = {\r\n        Year: 'Year',\r\n        Month: 'Month',\r\n        Weeks: 'Weeks',\r\n        Days: 'Days',\r\n        Hours: 'Hours',\r\n        Minutes: 'Minutes',\r\n        Seconds: 'Seconds',\r\n        MilliSeconds: 'Milliseconds'\r\n      };\r\n    }\r\n\r\n    this.displayString = returnText\r\n      .replace('Year', this.text.Year + ' | ')\r\n      .replace('Month', this.text.Month + ' | ')\r\n      .replace('Weeks', this.text.Weeks + ' | ')\r\n      .replace('Days', this.text.Days + ' | ')\r\n      .replace('Hours', this.text.Hours + ' | ')\r\n      .replace('Minutes', this.text.Minutes + ' | ')\r\n      .replace('Seconds', this.text.Seconds);\r\n\r\n    this.displayNumbers = returnNumbers.split('|');\r\n    this.display = this.displayString.split('|');\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';  \r\nimport { CountdownComponent } from './countdown/countdown.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [\r\n    CountdownComponent\r\n  ],\r\n  exports: [\r\n    CountdownComponent,\r\n  ]\r\n})\r\nexport class CountdownModule { }\r\n"],"names":[],"mappings":"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"}
