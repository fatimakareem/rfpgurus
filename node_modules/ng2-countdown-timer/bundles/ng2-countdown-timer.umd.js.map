{"version":3,"file":"ng2-countdown-timer.umd.js.map","sources":["ng://ng2-countdown-timer/lib/countdown/countdown.component.ts","ng://ng2-countdown-timer/lib/countdown.module.ts"],"sourcesContent":["import { Component, Input, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'countdown',\r\n  template: `<div class=\"countdown\">\r\n  <div *ngFor=\"let time of display; let i = index\" class=\"measurements {{time}}\">\r\n    <p class=\"measurements-number\">\r\n      {{ (showZero && displayNumbers[i] < 10) ? '0' + displayNumbers[i].trim() : displayNumbers[i]}}\r\n    </p>\r\n    <span *ngIf=\"display[i+1]\" class=\"divider\"> {{divider}} </span>\r\n    <p class=\"measurements-text\">\r\n      {{time}}\r\n    </p>\r\n  </div>\r\n</div>\r\n<ng-content></ng-content>`,\r\n  styles: [`.countdown{display:flex;align-items:center;justify-content:center;align-content:center;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif}.countdown .measurements{flex:.1}.countdown .measurements .divider{float:right}`]\r\n})\r\nexport class CountdownComponent {\r\n\r\n  @Input() units: any;\r\n  @Input() end: any;\r\n  @Input() displayString: String = '';\r\n  @Input() text: any;\r\n  @Input() divider: any;\r\n  @Input() showZero: Boolean = false;\r\n  @Output() reached: EventEmitter<Date> = new EventEmitter();\r\n  display: any = [];\r\n  displayNumbers: any = [];\r\n  wasReached: Boolean = false;\r\n\r\n  constructor() {\r\n    setInterval(() => this._displayString(), 100);\r\n  }\r\n\r\n  _displayString() {\r\n    if (this.wasReached)\r\n      return;\r\n\r\n    if (typeof this.units === 'string') {\r\n      this.units = this.units.split('|');\r\n    }\r\n\r\n    let givenDate: any = new Date(this.end);\r\n    let now: any = new Date();\r\n    let dateDifference: any = givenDate - now;\r\n\r\n    if ((dateDifference < 100 && dateDifference > 0) || dateDifference < 0 && !this.wasReached) {\r\n      this.wasReached = true;\r\n      this.reached.next(now);\r\n    }\r\n\r\n    let lastUnit = this.units[this.units.length - 1],\r\n      unitConstantForMillisecs = {\r\n        year: (((1000 * 60 * 60 * 24 * 7) * 4) * 12),\r\n        month: ((1000 * 60 * 60 * 24 * 7) * 4),\r\n        weeks: (1000 * 60 * 60 * 24 * 7),\r\n        days: (1000 * 60 * 60 * 24),\r\n        hours: (1000 * 60 * 60),\r\n        minutes: (1000 * 60),\r\n        seconds: 1000\r\n      },\r\n      unitsLeft = {},\r\n      returnText = '',\r\n      returnNumbers = '',\r\n      totalMillisecsLeft = dateDifference,\r\n      i,\r\n      unit: any;\r\n\r\n    for (i in this.units) {\r\n      if (this.units.hasOwnProperty(i)) {\r\n\r\n        unit = this.units[i].trim();\r\n        if (unitConstantForMillisecs[unit.toLowerCase()] === false) {\r\n          //$interval.cancel(countDownInterval);\r\n          throw new Error('Cannot repeat unit: ' + unit);\r\n\r\n        }\r\n        if (unitConstantForMillisecs.hasOwnProperty(unit.toLowerCase()) === false) {\r\n          throw new Error('Unit: ' + unit + ' is not supported. Please use following units: year, month, weeks, days, hours, minutes, seconds, milliseconds');\r\n        }\r\n\r\n        // If it was reached, everything is zero\r\n        unitsLeft[unit] = (this.wasReached) ? 0 : totalMillisecsLeft / unitConstantForMillisecs[unit.toLowerCase()];\r\n\r\n        if (lastUnit === unit) {\r\n          unitsLeft[unit] = Math.ceil(unitsLeft[unit]);\r\n        } else {\r\n          unitsLeft[unit] = Math.floor(unitsLeft[unit]);\r\n        }\r\n\r\n        totalMillisecsLeft -= unitsLeft[unit] * unitConstantForMillisecs[unit.toLowerCase()];\r\n        unitConstantForMillisecs[unit.toLowerCase()] = false;\r\n\r\n        // If it's less than 0, round to 0\r\n        unitsLeft[unit] = (unitsLeft[unit] > 0) ? unitsLeft[unit] : 0;\r\n\r\n        returnNumbers += ' ' + unitsLeft[unit] + ' | ';\r\n        returnText += ' ' + unit;\r\n      }\r\n    }\r\n\r\n    if (this.text === null || !this.text) {\r\n      this.text = {\r\n        Year: 'Year',\r\n        Month: 'Month',\r\n        Weeks: 'Weeks',\r\n        Days: 'Days',\r\n        Hours: 'Hours',\r\n        Minutes: 'Minutes',\r\n        Seconds: 'Seconds',\r\n        MilliSeconds: 'Milliseconds'\r\n      };\r\n    }\r\n\r\n    this.displayString = returnText\r\n      .replace('Year', this.text.Year + ' | ')\r\n      .replace('Month', this.text.Month + ' | ')\r\n      .replace('Weeks', this.text.Weeks + ' | ')\r\n      .replace('Days', this.text.Days + ' | ')\r\n      .replace('Hours', this.text.Hours + ' | ')\r\n      .replace('Minutes', this.text.Minutes + ' | ')\r\n      .replace('Seconds', this.text.Seconds);\r\n\r\n    this.displayNumbers = returnNumbers.split('|');\r\n    this.display = this.displayString.split('|');\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';  \r\nimport { CountdownComponent } from './countdown/countdown.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [\r\n    CountdownComponent\r\n  ],\r\n  exports: [\r\n    CountdownComponent,\r\n  ]\r\n})\r\nexport class CountdownModule { }\r\n"],"names":["EventEmitter","Component","Input","Output","NgModule","CommonModule"],"mappings":"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"}
