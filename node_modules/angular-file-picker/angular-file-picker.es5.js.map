{"version":3,"file":"angular-file-picker.es5.js","sources":["ts/angular-file-picker.ts","ts/angular-file-picker.module.ts","ts/file-picker.directive.ts","ts/read-mode.enum.ts","ts/picked-file-impl.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {AngularFilePickerModule,PickedFile,ReadMode} from './public_api';\n\nexport {FilePickerDirective as Éµa} from './file-picker.directive';","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FilePickerDirective } from './file-picker.directive';\nexport class AngularFilePickerModule { static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  imports: [\n    CommonModule\n  ],\n  declarations: [FilePickerDirective],\n  exports: [FilePickerDirective]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction AngularFilePickerModule_tsickle_Closure_declarations() {\n/** @type {?} */\nAngularFilePickerModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nAngularFilePickerModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Input,\n  HostListener,\n  OnInit,\n  Output,\n  Renderer2\n} from '@angular/core';\n\nimport { PickedFile } from './picked-file';\nimport { PickedFileImpl } from './picked-file-impl';\nimport { ReadMode } from './read-mode.enum';\nexport class FilePickerDirective implements OnInit {\npublic accept = '';\n/**\n * @return {?}\n */\nget multiple() { return this._multiple; }\n/**\n * @param {?} value\n * @return {?}\n */\nset multiple(value: any) { this._multiple = coerceBooleanProperty(value); }\n\n   readMode: ReadMode;\npublic filePick = new EventEmitter<PickedFile>();\npublic readStart = new EventEmitter<number>();\npublic readEnd = new EventEmitter<number>();\nprivate _multiple: boolean;\nprivate input: any;\n/**\n * @param {?} el\n * @param {?} renderer\n */\nconstructor(private el: ElementRef,\nprivate renderer: Renderer2) {\n  }\n/**\n * @return {?}\n */\npublic ngOnInit() {\n    this.input = this.renderer.createElement('input');\n    this.renderer.appendChild(this.el.nativeElement, this.input);\n\n    this.renderer.setAttribute(this.input, 'type', 'file');\n    this.renderer.setAttribute(this.input, 'accept', this.accept);\n    this.renderer.setStyle(this.input, 'display', 'none');\n\n    if (this.multiple) {\n      this.renderer.setAttribute(this.input, 'multiple', 'multiple');\n    }\n\n    this.renderer.listen(this.input, 'change', (event: any) => {\n      const /** @type {?} */ fileCount = event.target.files.length;\n\n      this.readStart.emit(event.target.files.length);\n      Promise.all(Array.from<File>(event.target.files).map(file => this.readFile(file)))\n        .then(() => this.readEnd.emit(fileCount));\n    });\n  }\n/**\n * @return {?}\n */\npublic reset() {\n    if (!this.input) {\n      console.error('It seems that ngOnInit() has not been executed or that the hidden input element is null. Did you mess with the DOM?');\n      return;\n    }\n\n    this.input.value = null;\n  }\n/**\n * @return {?}\n */\nprivate browse() {\n    if (!this.input) {\n      console.error('It seems that ngOnInit() has not been executed or that the hidden input element is null. Did you mess with the DOM?');\n      return;\n    }\n\n    this.input.click();\n  }\n/**\n * @param {?} file\n * @return {?}\n */\nprivate readFile(file: File): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const /** @type {?} */ reader = new FileReader();\n\n      reader.onload = (loaded: ProgressEvent) => {\n        const /** @type {?} */ fileReader = /** @type {?} */(( loaded.target as FileReader));\n        const /** @type {?} */ pickedFile = new PickedFileImpl(file.lastModifiedDate, file.name, file.size, file.type, this.readMode, fileReader.result);\n\n        this.filePick.emit(pickedFile);\n        resolve();\n      };\n\n      switch (this.readMode) {\n        case ReadMode.arrayBuffer:\n          reader.readAsArrayBuffer(file);\n          break;\n        case ReadMode.binaryString:\n          reader.readAsBinaryString(file);\n          break;\n        case ReadMode.text:\n          reader.readAsText(file);\n          break;\n        case ReadMode.dataURL:\n        default:\n          reader.readAsDataURL(file);\n          break;\n      }\n    });\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[ngFilePicker]'\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer2, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'accept': [{ type: Input },],\n'multiple': [{ type: Input },],\n'readMode': [{ type: Input, args: ['ngFilePicker', ] },],\n'filePick': [{ type: Output },],\n'readStart': [{ type: Output },],\n'readEnd': [{ type: Output },],\n'browse': [{ type: HostListener, args: ['click', ] },],\n};\n}\n\nfunction FilePickerDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nFilePickerDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nFilePickerDirective.ctorParameters;\n/** @type {?} */\nFilePickerDirective.propDecorators;\n/** @type {?} */\nFilePickerDirective.prototype.accept;\n/** @type {?} */\nFilePickerDirective.prototype.readMode;\n/** @type {?} */\nFilePickerDirective.prototype.filePick;\n/** @type {?} */\nFilePickerDirective.prototype.readStart;\n/** @type {?} */\nFilePickerDirective.prototype.readEnd;\n/** @type {?} */\nFilePickerDirective.prototype._multiple;\n/** @type {?} */\nFilePickerDirective.prototype.input;\n/** @type {?} */\nFilePickerDirective.prototype.el;\n/** @type {?} */\nFilePickerDirective.prototype.renderer;\n}\n\n/**\n * @param {?} value\n * @return {?}\n */\nfunction coerceBooleanProperty(value: any): boolean {\n  return value != null && `${value}` !== 'false';\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","\nexport type ReadMode = number;\nexport let ReadMode: any = {};\nReadMode.arrayBuffer = 0;\nReadMode.binaryString = 1;\nReadMode.dataURL = 2;\nReadMode.text = 3;\nReadMode[ReadMode.arrayBuffer] = \"arrayBuffer\";\nReadMode[ReadMode.binaryString] = \"binaryString\";\nReadMode[ReadMode.dataURL] = \"dataURL\";\nReadMode[ReadMode.text] = \"text\";\n\n","import { PickedFile } from './picked-file';\nimport { ReadMode } from './read-mode.enum';\nexport class PickedFileImpl implements PickedFile {\n/**\n * @return {?}\n */\nget lastModifiedDate(): Date {\n    return this._lastModifiedDate;\n  }\n/**\n * @return {?}\n */\nget name(): string {\n    return this._name;\n  }\n/**\n * @return {?}\n */\nget size(): number {\n    return this._size;\n  }\n/**\n * @return {?}\n */\nget type(): string {\n    return this._type;\n  }\n/**\n * @return {?}\n */\nget readMode(): ReadMode {\n    return this._readMode;\n  }\n/**\n * @return {?}\n */\nget content(): any {\n    return this._content;\n  }\n/**\n * @param {?} _lastModifiedDate\n * @param {?} _name\n * @param {?} _size\n * @param {?} _type\n * @param {?} _readMode\n * @param {?} _content\n */\nconstructor(\nprivate _lastModifiedDate: Date,\nprivate _name: string,\nprivate _size: number,\nprivate _type: string,\nprivate _readMode: ReadMode,\nprivate _content: any) {\n  }\n}\n\nfunction PickedFileImpl_tsickle_Closure_declarations() {\n/** @type {?} */\nPickedFileImpl.prototype._lastModifiedDate;\n/** @type {?} */\nPickedFileImpl.prototype._name;\n/** @type {?} */\nPickedFileImpl.prototype._size;\n/** @type {?} */\nPickedFileImpl.prototype._type;\n/** @type {?} */\nPickedFileImpl.prototype._readMode;\n/** @type {?} */\nPickedFileImpl.prototype._content;\n}\n\n"],"names":[],"mappings":"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"}
