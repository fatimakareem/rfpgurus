{"version":3,"file":"angular-file-picker.js","sources":["ts/angular-file-picker.ts","ts/angular-file-picker.module.ts","ts/file-picker.directive.ts","ts/read-mode.enum.ts","ts/picked-file-impl.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {AngularFilePickerModule,PickedFile,ReadMode} from './public_api';\n\nexport {FilePickerDirective as Éµa} from './file-picker.directive';","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FilePickerDirective } from './file-picker.directive';\nexport class AngularFilePickerModule { static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  imports: [\n    CommonModule\n  ],\n  declarations: [FilePickerDirective],\n  exports: [FilePickerDirective]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction AngularFilePickerModule_tsickle_Closure_declarations() {\n/** @type {?} */\nAngularFilePickerModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nAngularFilePickerModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Input,\n  HostListener,\n  OnInit,\n  Output,\n  Renderer2\n} from '@angular/core';\n\nimport { PickedFile } from './picked-file';\nimport { PickedFileImpl } from './picked-file-impl';\nimport { ReadMode } from './read-mode.enum';\nexport class FilePickerDirective implements OnInit {\npublic accept = '';\n/**\n * @return {?}\n */\nget multiple() { return this._multiple; }\n/**\n * @param {?} value\n * @return {?}\n */\nset multiple(value: any) { this._multiple = coerceBooleanProperty(value); }\n\n   readMode: ReadMode;\npublic filePick = new EventEmitter<PickedFile>();\npublic readStart = new EventEmitter<number>();\npublic readEnd = new EventEmitter<number>();\nprivate _multiple: boolean;\nprivate input: any;\n/**\n * @param {?} el\n * @param {?} renderer\n */\nconstructor(private el: ElementRef,\nprivate renderer: Renderer2) {\n  }\n/**\n * @return {?}\n */\npublic ngOnInit() {\n    this.input = this.renderer.createElement('input');\n    this.renderer.appendChild(this.el.nativeElement, this.input);\n\n    this.renderer.setAttribute(this.input, 'type', 'file');\n    this.renderer.setAttribute(this.input, 'accept', this.accept);\n    this.renderer.setStyle(this.input, 'display', 'none');\n\n    if (this.multiple) {\n      this.renderer.setAttribute(this.input, 'multiple', 'multiple');\n    }\n\n    this.renderer.listen(this.input, 'change', (event: any) => {\n      const /** @type {?} */ fileCount = event.target.files.length;\n\n      this.readStart.emit(event.target.files.length);\n      Promise.all(Array.from<File>(event.target.files).map(file => this.readFile(file)))\n        .then(() => this.readEnd.emit(fileCount));\n    });\n  }\n/**\n * @return {?}\n */\npublic reset() {\n    if (!this.input) {\n      console.error('It seems that ngOnInit() has not been executed or that the hidden input element is null. Did you mess with the DOM?');\n      return;\n    }\n\n    this.input.value = null;\n  }\n/**\n * @return {?}\n */\nprivate browse() {\n    if (!this.input) {\n      console.error('It seems that ngOnInit() has not been executed or that the hidden input element is null. Did you mess with the DOM?');\n      return;\n    }\n\n    this.input.click();\n  }\n/**\n * @param {?} file\n * @return {?}\n */\nprivate readFile(file: File): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const /** @type {?} */ reader = new FileReader();\n\n      reader.onload = (loaded: ProgressEvent) => {\n        const /** @type {?} */ fileReader = /** @type {?} */(( loaded.target as FileReader));\n        const /** @type {?} */ pickedFile = new PickedFileImpl(file.lastModifiedDate, file.name, file.size, file.type, this.readMode, fileReader.result);\n\n        this.filePick.emit(pickedFile);\n        resolve();\n      };\n\n      switch (this.readMode) {\n        case ReadMode.arrayBuffer:\n          reader.readAsArrayBuffer(file);\n          break;\n        case ReadMode.binaryString:\n          reader.readAsBinaryString(file);\n          break;\n        case ReadMode.text:\n          reader.readAsText(file);\n          break;\n        case ReadMode.dataURL:\n        default:\n          reader.readAsDataURL(file);\n          break;\n      }\n    });\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[ngFilePicker]'\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer2, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'accept': [{ type: Input },],\n'multiple': [{ type: Input },],\n'readMode': [{ type: Input, args: ['ngFilePicker', ] },],\n'filePick': [{ type: Output },],\n'readStart': [{ type: Output },],\n'readEnd': [{ type: Output },],\n'browse': [{ type: HostListener, args: ['click', ] },],\n};\n}\n\nfunction FilePickerDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nFilePickerDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nFilePickerDirective.ctorParameters;\n/** @type {?} */\nFilePickerDirective.propDecorators;\n/** @type {?} */\nFilePickerDirective.prototype.accept;\n/** @type {?} */\nFilePickerDirective.prototype.readMode;\n/** @type {?} */\nFilePickerDirective.prototype.filePick;\n/** @type {?} */\nFilePickerDirective.prototype.readStart;\n/** @type {?} */\nFilePickerDirective.prototype.readEnd;\n/** @type {?} */\nFilePickerDirective.prototype._multiple;\n/** @type {?} */\nFilePickerDirective.prototype.input;\n/** @type {?} */\nFilePickerDirective.prototype.el;\n/** @type {?} */\nFilePickerDirective.prototype.renderer;\n}\n\n/**\n * @param {?} value\n * @return {?}\n */\nfunction coerceBooleanProperty(value: any): boolean {\n  return value != null && `${value}` !== 'false';\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","\nexport type ReadMode = number;\nexport let ReadMode: any = {};\nReadMode.arrayBuffer = 0;\nReadMode.binaryString = 1;\nReadMode.dataURL = 2;\nReadMode.text = 3;\nReadMode[ReadMode.arrayBuffer] = \"arrayBuffer\";\nReadMode[ReadMode.binaryString] = \"binaryString\";\nReadMode[ReadMode.dataURL] = \"dataURL\";\nReadMode[ReadMode.text] = \"text\";\n\n","import { PickedFile } from './picked-file';\nimport { ReadMode } from './read-mode.enum';\nexport class PickedFileImpl implements PickedFile {\n/**\n * @return {?}\n */\nget lastModifiedDate(): Date {\n    return this._lastModifiedDate;\n  }\n/**\n * @return {?}\n */\nget name(): string {\n    return this._name;\n  }\n/**\n * @return {?}\n */\nget size(): number {\n    return this._size;\n  }\n/**\n * @return {?}\n */\nget type(): string {\n    return this._type;\n  }\n/**\n * @return {?}\n */\nget readMode(): ReadMode {\n    return this._readMode;\n  }\n/**\n * @return {?}\n */\nget content(): any {\n    return this._content;\n  }\n/**\n * @param {?} _lastModifiedDate\n * @param {?} _name\n * @param {?} _size\n * @param {?} _type\n * @param {?} _readMode\n * @param {?} _content\n */\nconstructor(\nprivate _lastModifiedDate: Date,\nprivate _name: string,\nprivate _size: number,\nprivate _type: string,\nprivate _readMode: ReadMode,\nprivate _content: any) {\n  }\n}\n\nfunction PickedFileImpl_tsickle_Closure_declarations() {\n/** @type {?} */\nPickedFileImpl.prototype._lastModifiedDate;\n/** @type {?} */\nPickedFileImpl.prototype._name;\n/** @type {?} */\nPickedFileImpl.prototype._size;\n/** @type {?} */\nPickedFileImpl.prototype._type;\n/** @type {?} */\nPickedFileImpl.prototype._readMode;\n/** @type {?} */\nPickedFileImpl.prototype._content;\n}\n\n"],"names":[],"mappings":"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"}
